Warning: Found unknown `rpc_url` config for profile `citrea_testnet` defined in foundry.toml.
No files changed, compilation skipped
Traces:
  [2402496] DeployVolrContracts::run()
    ├─ [0] VM::envUint("PRIVATE_KEY") [staticcall]
    │   └─ ← [Return] <env var value>
    ├─ [0] VM::addr(<pk>) [staticcall]
    │   └─ ← [Return] 0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD
    ├─ [0] console::log("Deployer address:", 0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD) [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("Deployer balance:", 3687223144821485101 [3.687e18]) [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("Chain ID:", 5115) [staticcall]
    │   └─ ← [Stop]
    ├─ [0] VM::startBroadcast(<pk>)
    │   └─ ← [Return]
    ├─ [0] console::log("\n=== Deploying PolicyRegistry Implementation ===") [staticcall]
    │   └─ ← [Stop]
    ├─ [727485] → new PolicyRegistry@0xd9129d92C654fd65aC8a54D39D47D9fdCca4e873
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 3517 bytes of code
    ├─ [0] console::log("PolicyRegistry Implementation:", PolicyRegistry: [0xd9129d92C654fd65aC8a54D39D47D9fdCca4e873]) [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("\n=== Deploying PolicyRegistry Proxy ===") [staticcall]
    │   └─ ← [Stop]
    ├─ [86150] → new ERC1967Proxy@0x58FA10188d87335EC67f7f26698c9fDFaB1b7868
    │   ├─ emit Upgraded(implementation: PolicyRegistry: [0xd9129d92C654fd65aC8a54D39D47D9fdCca4e873])
    │   ├─ [46295] PolicyRegistry::initialize(0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD) [delegatecall]
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop]
    │   └─ ← [Return] 76 bytes of code
    ├─ [0] console::log("PolicyRegistry Proxy:", ERC1967Proxy: [0x58FA10188d87335EC67f7f26698c9fDFaB1b7868]) [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("\n=== Setting timelock and multisig ===") [staticcall]
    │   └─ ← [Stop]
    ├─ [24217] ERC1967Proxy::fallback(0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD)
    │   ├─ [23910] PolicyRegistry::setTimelock(0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD) [delegatecall]
    │   │   ├─ emit TimelockSet(timelock: 0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD)
    │   │   └─ ← [Stop]
    │   └─ ← [Return]
    ├─ [24300] ERC1967Proxy::fallback(0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD)
    │   ├─ [23993] PolicyRegistry::setMultisig(0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD) [delegatecall]
    │   │   ├─ emit MultisigSet(multisig: 0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD)
    │   │   └─ ← [Stop]
    │   └─ ← [Return]
    ├─ [0] console::log("Timelock and multisig set to deployer:", 0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD) [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("\n=== Deploying WhitelistPolicy ===") [staticcall]
    │   └─ ← [Stop]
    ├─ [254785] → new WhitelistPolicy@0x2128e6C678F63519F1e96D4C51BA3a918450fd74
    │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: 0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD)
    │   └─ ← [Return] 1154 bytes of code
    ├─ [0] console::log("WhitelistPolicy:", WhitelistPolicy: [0x2128e6C678F63519F1e96D4C51BA3a918450fd74]) [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("\n=== Registering default policy ===") [staticcall]
    │   └─ ← [Stop]
    ├─ [48206] ERC1967Proxy::fallback(0x0000000000000000000000000000000000000000000000000000000000000000, WhitelistPolicy: [0x2128e6C678F63519F1e96D4C51BA3a918450fd74], "Default whitelist policy")
    │   ├─ [47878] PolicyRegistry::register(0x0000000000000000000000000000000000000000000000000000000000000000, WhitelistPolicy: [0x2128e6C678F63519F1e96D4C51BA3a918450fd74], "Default whitelist policy") [delegatecall]
    │   │   ├─ emit PolicyRegistered(policyId: 0x0000000000000000000000000000000000000000000000000000000000000000, impl: WhitelistPolicy: [0x2128e6C678F63519F1e96D4C51BA3a918450fd74], meta: "Default whitelist policy")
    │   │   └─ ← [Stop]
    │   └─ ← [Return]
    ├─ [0] VM::toString(0x0000000000000000000000000000000000000000000000000000000000000000) [staticcall]
    │   └─ ← [Return] "0x0000000000000000000000000000000000000000000000000000000000000000"
    ├─ [0] console::log("Default policy registered:", "0x0000000000000000000000000000000000000000000000000000000000000000") [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("\n=== Note: Whitelist Configuration Required ===") [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("WhitelistPolicy requires targets to be added after deployment.") [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("Call whitelistPolicy.addTarget(address) to allow contract addresses.") [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("\n=== Deploying VolrInvoker ===") [staticcall]
    │   └─ ← [Stop]
    ├─ [1070854] → new VolrInvoker@0x5eae9f6E0f77Aa0f6086552ebe7cD0cd5A4bBefa
    │   └─ ← [Return] 5237 bytes of code
    ├─ [0] console::log("VolrInvoker:", VolrInvoker: [0x5eae9f6E0f77Aa0f6086552ebe7cD0cd5A4bBefa]) [staticcall]
    │   └─ ← [Stop]
    ├─ [0] VM::stopBroadcast()
    │   └─ ← [Return]
    ├─ [0] console::log("\n=== Deployment Summary ===") [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("Chain ID:", 5115) [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("PolicyRegistry Proxy:", ERC1967Proxy: [0x58FA10188d87335EC67f7f26698c9fDFaB1b7868]) [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("PolicyRegistry Implementation:", PolicyRegistry: [0xd9129d92C654fd65aC8a54D39D47D9fdCca4e873]) [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("WhitelistPolicy:", WhitelistPolicy: [0x2128e6C678F63519F1e96D4C51BA3a918450fd74]) [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("VolrInvoker:", VolrInvoker: [0x5eae9f6E0f77Aa0f6086552ebe7cD0cd5A4bBefa]) [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("\n=== Configuration ===") [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("1. Backend .env:") [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("   INVOKER_ADDRESS_MAP={\"%s\":\"%s\"}", 5115, VolrInvoker: [0x5eae9f6E0f77Aa0f6086552ebe7cD0cd5A4bBefa]) [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("\n2. Frontend VolrProvider config:") [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("   invokerAddressMap: { %s: \"%s\" }", 5115, VolrInvoker: [0x5eae9f6E0f77Aa0f6086552ebe7cD0cd5A4bBefa]) [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("\n3. RPC URL:") [staticcall]
    │   └─ ← [Stop]
    ├─ [0] console::log("   https://rpc.testnet.citrea.xyz") [staticcall]
    │   └─ ← [Stop]
    └─ ← [Return]


Script ran successfully.

== Logs ==
  Deployer address: 0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD
  Deployer balance: 3687223144821485101
  Chain ID: 5115
  
=== Deploying PolicyRegistry Implementation ===
  PolicyRegistry Implementation: 0xd9129d92C654fd65aC8a54D39D47D9fdCca4e873
  
=== Deploying PolicyRegistry Proxy ===
  PolicyRegistry Proxy: 0x58FA10188d87335EC67f7f26698c9fDFaB1b7868
  
=== Setting timelock and multisig ===
  Timelock and multisig set to deployer: 0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD
  
=== Deploying WhitelistPolicy ===
  WhitelistPolicy: 0x2128e6C678F63519F1e96D4C51BA3a918450fd74
  
=== Registering default policy ===
  Default policy registered: 0x0000000000000000000000000000000000000000000000000000000000000000
  
=== Note: Whitelist Configuration Required ===
  WhitelistPolicy requires targets to be added after deployment.
  Call whitelistPolicy.addTarget(address) to allow contract addresses.
  
=== Deploying VolrInvoker ===
  VolrInvoker: 0x5eae9f6E0f77Aa0f6086552ebe7cD0cd5A4bBefa
  
=== Deployment Summary ===
  Chain ID: 5115
  PolicyRegistry Proxy: 0x58FA10188d87335EC67f7f26698c9fDFaB1b7868
  PolicyRegistry Implementation: 0xd9129d92C654fd65aC8a54D39D47D9fdCca4e873
  WhitelistPolicy: 0x2128e6C678F63519F1e96D4C51BA3a918450fd74
  VolrInvoker: 0x5eae9f6E0f77Aa0f6086552ebe7cD0cd5A4bBefa
  
=== Configuration ===
  1. Backend .env:
     INVOKER_ADDRESS_MAP={"5115":"0x5eae9f6E0f77Aa0f6086552ebe7cD0cd5A4bBefa"}
  
2. Frontend VolrProvider config:
     invokerAddressMap: { 5115: "0x5eae9f6E0f77Aa0f6086552ebe7cD0cd5A4bBefa" }
  
3. RPC URL:
     https://rpc.testnet.citrea.xyz

## Setting up 1 EVM.
==========================
Simulated On-chain Traces:

  [727485] → new PolicyRegistry@0xd9129d92C654fd65aC8a54D39D47D9fdCca4e873
    ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    └─ ← [Return] 3517 bytes of code

  [88650] → new ERC1967Proxy@0x58FA10188d87335EC67f7f26698c9fDFaB1b7868
    ├─ emit Upgraded(implementation: PolicyRegistry: [0xd9129d92C654fd65aC8a54D39D47D9fdCca4e873])
    ├─ [46295] PolicyRegistry::initialize(0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD) [delegatecall]
    │   ├─ emit Initialized(version: 1)
    │   └─ ← [Stop]
    └─ ← [Return] 76 bytes of code

  [30717] ERC1967Proxy::fallback(0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD)
    ├─ [25910] PolicyRegistry::setTimelock(0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD) [delegatecall]
    │   ├─ emit TimelockSet(timelock: 0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD)
    │   └─ ← [Stop]
    └─ ← [Return]

  [30800] ERC1967Proxy::fallback(0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD)
    ├─ [25993] PolicyRegistry::setMultisig(0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD) [delegatecall]
    │   ├─ emit MultisigSet(multisig: 0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD)
    │   └─ ← [Stop]
    └─ ← [Return]

  [254785] → new WhitelistPolicy@0x2128e6C678F63519F1e96D4C51BA3a918450fd74
    ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: 0xe0785a8cDc92bAe49Ae7aA6C99B602e3CC43F7eD)
    └─ ← [Return] 1154 bytes of code

  [54706] ERC1967Proxy::fallback(0x0000000000000000000000000000000000000000000000000000000000000000, WhitelistPolicy: [0x2128e6C678F63519F1e96D4C51BA3a918450fd74], "Default whitelist policy")
    ├─ [49878] PolicyRegistry::register(0x0000000000000000000000000000000000000000000000000000000000000000, WhitelistPolicy: [0x2128e6C678F63519F1e96D4C51BA3a918450fd74], "Default whitelist policy") [delegatecall]
    │   ├─ emit PolicyRegistered(policyId: 0x0000000000000000000000000000000000000000000000000000000000000000, impl: WhitelistPolicy: [0x2128e6C678F63519F1e96D4C51BA3a918450fd74], meta: "Default whitelist policy")
    │   └─ ← [Stop]
    └─ ← [Return]

  [1070854] → new VolrInvoker@0x5eae9f6E0f77Aa0f6086552ebe7cD0cd5A4bBefa
    └─ ← [Return] 5237 bytes of code


==========================

Chain 5115

Estimated gas price: 0.0020001 gwei

Estimated total gas used for script: 3545634

Estimated amount required: 0.0000070916225634 ETH

==========================


==========================

ONCHAIN EXECUTION COMPLETE & SUCCESSFUL.

Transactions saved to: /Users/danny/strartups/volr/volr-project/volr-contracts/broadcast/DeployCitrea.s.sol/5115/run-latest.json

Sensitive values saved to: /Users/danny/strartups/volr/volr-project/volr-contracts/cache/DeployCitrea.s.sol/5115/run-latest.json

