# 배포 에러 원인 설명 (쉬운 말로)

## 문제: `Unauthorized()` 에러가 발생한 이유

### 상황 설명

**PolicyRegistry**는 정책을 등록하는 컨트랙트인데, 보안을 위해 **"누구나 정책을 등록할 수 없게"** 만들어져 있습니다.

### 비유로 설명하면

**은행 창구**를 생각해보세요:
- 일반 고객: 창구에서 돈을 찾을 수 있음 (읽기)
- 은행 직원: 창구에서 돈을 입금할 수 있음 (쓰기)
- 은행장: 새로운 계좌를 만들 수 있음 (정책 등록)

**PolicyRegistry**도 마찬가지입니다:
- `register()` 함수: 새로운 정책을 등록하는 함수
- 이 함수는 **"은행장"**만 사용할 수 있도록 제한되어 있음
- 여기서 "은행장"은 **timelock** 또는 **multisig** 주소

### 문제가 발생한 이유

배포 스크립트에서:
1. ✅ PolicyRegistry를 배포함
2. ✅ Owner(배포자)를 설정함
3. ❌ **하지만 timelock과 multisig를 설정하지 않음!**
4. ❌ 그래서 `register()` 함수를 호출하려고 하면 "권한이 없습니다" 에러 발생

### 해결 방법

배포 스크립트에 다음 코드를 추가했습니다:

```solidity
// 배포자를 timelock과 multisig로 설정
registry.setTimelock(deployer);  // "배포자를 은행장으로 임명"
registry.setMultisig(deployer);  // "배포자를 은행장으로 임명"
```

이제 배포자가 정책을 등록할 수 있게 됩니다!

### 왜 이렇게 만들어졌나요?

**보안상의 이유**입니다:
- 프로덕션에서는 timelock과 multisig를 별도의 주소로 설정
- 이렇게 하면 정책 변경이 즉시 일어나지 않고, 여러 사람의 승인이 필요함
- 하지만 테스트넷에서는 편의를 위해 배포자를 timelock/multisig로 설정

### 요약

**문제**: PolicyRegistry는 정책 등록을 위해 timelock/multisig 권한이 필요한데, 배포 스크립트에서 이를 설정하지 않아서 에러 발생

**해결**: 배포 스크립트에 timelock과 multisig를 배포자로 설정하는 코드 추가

**결과**: 이제 정상적으로 배포 가능! ✅

